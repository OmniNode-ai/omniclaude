[pytest]
# Pytest Configuration for Polymorphic Agent Framework Tests

# Test Discovery
testpaths = tests
python_files = test_*.py
python_classes = Test*
python_functions = test_*

# Test Markers
markers =
    unit: Unit tests (fast, isolated, <100ms per test)
    integration: Integration tests (moderate speed, <500ms per test)
    e2e: End-to-end tests (slow, full system, <5s per test)
    performance: Performance benchmarks and load tests
    security: Security and vulnerability tests
    slow: Slow-running tests (>1s) - skipped by default
    database: Tests requiring database connection
    ai: Tests requiring AI model (RTX 5090, Gemini, etc.)
    network: Tests requiring network connectivity

# Output Configuration
console_output_style = progress
addopts =
    -v
    --strict-markers
    --tb=short
    --disable-warnings
    --color=yes
    -p no:cacheprovider

# Coverage Configuration
[coverage:run]
source = lib
omit =
    */tests/*
    */test_*.py
    */__pycache__/*
    */site-packages/*

[coverage:report]
precision = 2
show_missing = True
skip_covered = False

[coverage:html]
directory = htmlcov

# Performance Thresholds
[pytest-benchmark]
min_rounds = 5
calibration_precision = 10

# Timeout Configuration
timeout = 30
timeout_method = thread
