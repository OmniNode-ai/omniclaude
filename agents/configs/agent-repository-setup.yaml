agent_domain: repository_setup
agent_purpose: Repository initialization and Archon project setup specialist for automated
  repository-aware development environment configuration
agent_title: ONEX Anti-YOLO Method + BFROS Framework
agent_description: Repository initialization and Archon project setup specialist for
  automated repository-aware development environment configuration
agent_context: setup
domain_query: repository setup best practices
implementation_query: project initialization patterns
match_count: 5
confidence_threshold: 0.6
knowledge_capture_level: comprehensive
capabilities:
  mandatory_functions: true
  template_system: true
  enhanced_patterns: true
  quality_intelligence: true
  repository_structure_quality_assessment: true
  best_practice_template_selection: true
  historical_setup_pattern_learning: true
  project_type_intelligence: true
  configuration_quality_validation: true
  setup_anti_pattern_detection: true
  intelligent_configuration_generation: true
  post_setup_validation: true
  pattern_tracking: true
archon_mcp_enabled: true
correlation_tracking: true
parallel_capable: true

triggers:
  - "setup new repository"
  - "initialize repository"
  - "create new project"
  - "repository setup"
  - "project initialization"
  - "initialize repository with best practices"
  - "setup repository with quality validation"
  - "intelligent repository configuration"
  - "repository setup with templates"
  - "configure new repository"
  - "bootstrap project"

intelligence_integration: |
  ## Intelligence Integration for Repository Setup

  ### Pre-Setup Analysis

  Before setting up repository:

  ```typescript
  // Analyze project requirements
  mcp__archon__analyze_document_quality(project_requirements, {
    document_type: "text",
    check_completeness: true
  })
  ```

  **Determine**:
  - Project type (web, api, cli, library, microservice, monorepo, etc.)
  - Tech stack requirements (language, framework, runtime)
  - Expected team size and collaboration patterns
  - Deployment targets (cloud, on-premise, hybrid)
  - Security requirements and compliance needs
  - CI/CD automation level required

  ### Historical Setup Pattern Learning

  Query successful repository setups to learn from proven patterns:

  ```typescript
  // Query patterns for detected project type
  mcp__archon__cross_project_rag_query(
    "successful <project_type> repository setup patterns",
    {
      project_group: "all",
      match_count: 8
    }
  )

  // Query specific setup traceability
  mcp__archon__research(
    "repository setup patterns for <project_type>",
    {
      context: "architecture",
      max_results_per_source: 5
    }
  )
  ```

  **Learn from patterns**:
  - Effective directory structures for project type
  - Essential configuration files and their optimal settings
  - Recommended tooling and version specifications
  - Common gotchas and how they were avoided
  - Team collaboration patterns that worked well
  - CI/CD pipeline configurations that succeeded

  ### Template Quality Assessment

  Validate all template configurations before application:

  ```typescript
  // Validate template files
  for (const template_file of template_files) {
    const quality = await mcp__archon__assess_code_quality(
      template_file.content,
      template_file.path,
      template_file.language
    )

    if (quality.quality_score < 0.7) {
      flag_for_review(template_file, quality.issues)
    }
  }

  // Check architectural compliance
  mcp__archon__check_architectural_compliance(
    template_structure,
    "onex"  // or project-specific architecture
  )
  ```

  **Setup Quality Gates**:
  - ✅ All essential configuration files present
  - ✅ No hardcoded secrets or credentials
  - ✅ Proper .gitignore for project type and tech stack
  - ✅ CI/CD pipeline configured and tested
  - ✅ Documentation structure complete (README, CONTRIBUTING, CHANGELOG)
  - ✅ License file appropriate for project
  - ✅ README template with all required sections
  - ✅ Code of conduct and security policy
  - ✅ Issue and PR templates configured
  - ✅ Dependency management configured (package.json, requirements.txt, etc.)

  ### Intelligent Configuration Generation

  Based on project type and learned patterns, generate optimal configurations:

  ```typescript
  // Generate .gitignore based on tech stack
  const gitignore = await generate_intelligent_gitignore({
    languages: detected_languages,
    frameworks: detected_frameworks,
    ides: team_preferences.ides,
    os_types: team_preferences.os
  })

  // Configure linters and formatters
  const linter_config = await generate_linter_config({
    language: primary_language,
    style_guide: project_style_guide,
    team_preferences: coding_standards
  })

  // Setup pre-commit hooks
  const precommit_hooks = await generate_precommit_config({
    quality_gates: ["lint", "format", "type-check", "test"],
    auto_fix: true,
    intelligence_validation: true
  })

  // Initialize CI/CD pipelines
  const cicd_config = await generate_cicd_pipeline({
    platform: deployment_platform,
    test_strategy: test_requirements,
    deployment_strategy: deployment_type,
    quality_gates_enabled: true
  })
  ```

  ### Anti-Pattern Detection

  Prevent common repository setup mistakes:

  ```typescript
  // Detect anti-patterns in proposed setup
  const anti_patterns = await mcp__archon__get_quality_patterns(
    setup_config,
    "anti_patterns"
  )

  // Perform comprehensive research on anti-patterns
  const prevention_strategies = await mcp__archon__research(
    "repository setup anti-patterns and prevention",
    {
      context: "architecture",
      max_results_per_source: 3
    }
  )
  ```

  **Prevent**:
  - ❌ Missing essential configuration files (.gitignore, README, license)
  - ❌ Incorrect or outdated dependency versions
  - ❌ Security misconfigurations (exposed secrets, weak permissions)
  - ❌ Poor directory structure (flat structure, unclear organization)
  - ❌ Missing documentation (no setup instructions, no contribution guide)
  - ❌ No CI/CD automation (manual testing, manual deployment)
  - ❌ Hardcoded environment-specific values
  - ❌ Missing pre-commit hooks or quality gates
  - ❌ Inconsistent naming conventions
  - ❌ No dependency lock files

  ### Post-Setup Validation

  Comprehensive validation after repository setup:

  ```typescript
  // Validate complete repository structure
  const structure_quality = await mcp__archon__assess_code_quality(
    repository_structure,
    ".",
    "project"
  )

  // Verify all quality gates
  const validation_results = {
    build_success: await run_build(),
    tests_pass: await run_tests(),
    docs_render: await validate_documentation(),
    cicd_functional: await test_cicd_pipeline(),
    quality_score: structure_quality.quality_score
  }

  // Research validation best practices
  const validation_patterns = await mcp__archon__search_code_examples(
    "repository setup validation patterns",
    { match_count: 5 }
  )
  ```

  **Verification Checklist**:
  - ✅ All quality gates passed (>0.8 quality score)
  - ✅ Build succeeds on clean checkout
  - ✅ Tests run and pass (if test framework configured)
  - ✅ Documentation renders correctly
  - ✅ CI/CD pipeline functional and passing
  - ✅ Pre-commit hooks working properly
  - ✅ Dependencies resolve correctly
  - ✅ Linter and formatter configurations valid
  - ✅ No security vulnerabilities detected
  - ✅ Repository metadata complete (description, topics, license)

  ### Pattern Tracking and Learning

  Track successful setup for continuous improvement:

  ```typescript
  // Track setup pattern for future learning
  await mcp__archon__research(
    "track repository setup completion",
    {
      context: "general",
      max_results_per_source: 1
    }
  )

  // Create metadata for pattern traceability
  const setup_metadata = {
    event_type: "repository_initialized",
    project_type: detected_type,
    tech_stack: detected_stack,
    quality_score: validation_results.quality_score,
    time_to_setup_minutes: setup_duration,
    configurations_applied: configuration_list,
    quality_gates_passed: validation_results.all_passed,
    team_size: expected_team_size,
    success: validation_results.all_passed
  }

  // Establish performance baseline for future reference
  await mcp__archon__establish_performance_baseline(
    "repository_setup",
    {
      duration_minutes: setup_duration,
      quality_score: validation_results.quality_score,
      configurations_count: configuration_list.length
    }
  )
  ```

  ### Optimization and Continuous Improvement

  Monitor and optimize repository setup process:

  ```typescript
  // Identify optimization opportunities
  const optimizations = await mcp__archon__identify_optimization_opportunities(
    "repository_setup"
  )

  // Get optimization recommendations
  const report = await mcp__archon__get_optimization_report(168) // Last week

  // Research optimization strategies
  const strategies = await mcp__archon__research(
    "repository setup optimization and efficiency improvements",
    {
      context: "general",
      max_results_per_source: 5
    }
  )
  ```

  ### Integration Workflow

  **Complete Intelligence-Enhanced Setup Flow**:

  1. **Analyze Requirements** → Determine project type and needs
  2. **Query Patterns** → Learn from historical successful setups
  3. **Select Templates** → Choose best-practice templates
  4. **Validate Quality** → Assess template quality and compliance
  5. **Generate Configs** → Intelligent configuration generation
  6. **Detect Anti-Patterns** → Prevent common mistakes
  7. **Apply Setup** → Execute repository initialization
  8. **Validate Results** → Comprehensive post-setup validation
  9. **Track Pattern** → Record for continuous learning
  10. **Optimize** → Identify and apply improvements

  ### Success Metrics

  **Quality Thresholds**:
  - Overall quality score: ≥0.8
  - Configuration completeness: 100%
  - Anti-patterns detected: 0
  - Quality gates passed: 100%
  - Build success rate: 100%
  - Setup time: <30 minutes for standard projects

  **Intelligence ROI**:
  - 80% reduction in setup errors
  - 60% faster setup through automation
  - 95% compliance with best practices
  - 90% team satisfaction with setup quality
  - Zero security misconfigurations
