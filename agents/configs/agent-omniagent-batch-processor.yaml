agent_domain: omnibatch_processor
agent_purpose: Processes multiple requests through OmniAgent's batch processing system.
  Optimizes for parallel execution, cost efficiency, and comprehensive analysis of
  large codebases or multiple related tasks. Enhanced with Phase 5 Intelligence for
  quality assessment, performance optimization, and pattern learning.
agent_title: "\U0001F527 OmniAgent Batch Processor with Intelligence"
agent_description: Processes multiple requests through OmniAgent's batch processing
  system. Optimizes for parallel execution, cost efficiency, and comprehensive analysis
  of large codebases or multiple related tasks. Includes intelligent quality gates,
  performance monitoring, and adaptive batch optimization.
agent_context: development
domain_query: batch processing optimization and quality assessment
implementation_query: parallel execution management with intelligence
match_count: 5
confidence_threshold: 0.6
knowledge_capture_level: comprehensive

# Triggers - Standard + Intelligence-Enhanced
triggers:
  # Standard batch processing triggers
  - "batch process multiple files"
  - "analyze entire codebase"
  - "process multiple requests in parallel"
  - "optimize batch execution"
  - "coordinate parallel tasks"

  # Intelligence-specific triggers
  - "assess batch processing quality"
  - "optimize batch performance and efficiency"
  - "analyze batch error rates and patterns"
  - "establish batch processing baselines"
  - "identify batch optimization opportunities"
  - "monitor batch resource utilization"
  - "predict batch processing outcomes"
  - "learn from batch execution patterns"

# Capabilities - Core + Intelligence
capabilities:
  # Core capabilities
  mandatory_functions: true
  template_system: true
  enhanced_patterns: true
  parallel_capable: true

  # Intelligence capabilities
  quality_intelligence: true
  batch_quality_assessment: true
  performance_optimization: true
  resource_efficiency_analysis: true
  error_pattern_detection: true
  predictive_batch_planning: true
  adaptive_batch_sizing: true
  cost_benefit_analysis: true

# Archon MCP Integration
archon_mcp_enabled: true
correlation_tracking: true

# Intelligence Integration - Pre/During/Post Pattern
intelligence_integration:
  enabled: true

  # Pre-Execution Intelligence
  pre_execution:
    description: "Analyze batch requests and establish quality baselines before execution"
    steps:
      - name: "Batch Complexity Analysis"
        tool: "assess_code_quality"
        purpose: "Analyze complexity and structure of batch requests"
        inputs:
          - "Batch request specifications"
          - "Target codebase structure"
          - "Resource availability"
        outputs:
          - "Complexity score per request"
          - "Estimated processing time"
          - "Resource requirements"

      - name: "Performance Baseline Establishment"
        tool: "establish_performance_baseline"
        purpose: "Set baseline metrics for batch processing efficiency"
        inputs:
          - "Historical batch data"
          - "Current system resources"
          - "Request characteristics"
        outputs:
          - "Expected throughput"
          - "Resource utilization targets"
          - "Quality thresholds"

      - name: "Optimization Opportunity Identification"
        tool: "identify_optimization_opportunities"
        purpose: "Find ways to improve batch processing before execution"
        inputs:
          - "Batch request patterns"
          - "System capabilities"
          - "Historical performance data"
        outputs:
          - "Parallelization opportunities"
          - "Resource allocation strategies"
          - "Request grouping recommendations"

      - name: "Batch Planning & Sizing"
        tool: "analyze_document_quality"
        purpose: "Determine optimal batch size and execution strategy"
        inputs:
          - "Request complexity scores"
          - "Available resources"
          - "Performance targets"
        outputs:
          - "Optimal batch sizes"
          - "Execution order"
          - "Resource allocation plan"

  # During-Execution Intelligence
  during_execution:
    description: "Monitor batch processing quality and performance in real-time"
    steps:
      - name: "Real-time Quality Monitoring"
        tool: "assess_code_quality"
        purpose: "Continuously assess quality of generated outputs"
        frequency: "per_request"
        inputs:
          - "Generated code/content"
          - "Quality thresholds"
          - "Pattern compliance"
        outputs:
          - "Quality scores per item"
          - "Pattern violations"
          - "Improvement suggestions"
        actions:
          - "Flag low-quality outputs"
          - "Trigger quality improvement"
          - "Adjust batch parameters"

      - name: "Performance Tracking"
        tool: "monitor_performance_trends"
        purpose: "Track batch processing performance metrics"
        frequency: "continuous"
        inputs:
          - "Request processing times"
          - "Resource utilization"
          - "Error rates"
        outputs:
          - "Performance trends"
          - "Bottleneck detection"
          - "Resource hotspots"
        actions:
          - "Adjust parallelization"
          - "Reallocate resources"
          - "Optimize request routing"

      - name: "Error Pattern Detection"
        tool: "get_quality_patterns"
        purpose: "Identify and learn from processing errors"
        frequency: "on_error"
        inputs:
          - "Error messages"
          - "Failed requests"
          - "Execution context"
        outputs:
          - "Error categories"
          - "Common failure patterns"
          - "Recovery strategies"
        actions:
          - "Apply error corrections"
          - "Update batch strategy"
          - "Learn failure patterns"

      - name: "Adaptive Batch Adjustment"
        tool: "apply_performance_optimization"
        purpose: "Dynamically adjust batch processing based on performance"
        frequency: "adaptive"
        inputs:
          - "Current performance metrics"
          - "Resource availability"
          - "Remaining requests"
        outputs:
          - "Adjusted batch sizes"
          - "Modified execution strategy"
          - "Resource reallocation"
        actions:
          - "Increase/decrease parallelism"
          - "Adjust batch sizes"
          - "Optimize resource usage"

  # Post-Execution Intelligence
  post_execution:
    description: "Analyze batch processing results and capture learning patterns"
    steps:
      - name: "Comprehensive Quality Assessment"
        tool: "assess_code_quality"
        purpose: "Evaluate overall quality of batch processing outputs"
        inputs:
          - "All generated outputs"
          - "Quality metrics"
          - "Pattern compliance"
        outputs:
          - "Overall quality score"
          - "Quality distribution"
          - "Pattern adherence report"

      - name: "Performance Analysis & ROI"
        tool: "get_optimization_report"
        purpose: "Analyze batch processing performance and cost-effectiveness"
        inputs:
          - "Execution metrics"
          - "Resource costs"
          - "Quality outcomes"
        outputs:
          - "Performance summary"
          - "Cost-benefit analysis"
          - "Efficiency metrics"

      - name: "Pattern Learning & Optimization"
        tool: "monitor_performance_trends"
        purpose: "Learn from batch execution for future optimization"
        inputs:
          - "Batch execution data"
          - "Success/failure patterns"
          - "Resource utilization"
        outputs:
          - "Learned patterns"
          - "Optimization recommendations"
          - "Best practices identified"

      - name: "Architectural Compliance Check"
        tool: "check_architectural_compliance"
        purpose: "Ensure batch outputs comply with architectural standards"
        inputs:
          - "Generated code/content"
          - "Architecture requirements"
          - "ONEX patterns"
        outputs:
          - "Compliance score"
          - "Violations detected"
          - "Remediation guidance"

# Quality Gates for Batch Processing
quality_gates:
  pre_execution:
    - name: "Batch Complexity Threshold"
      metric: "average_complexity_score"
      threshold: 0.7
      action: "Adjust batch sizes or split complex requests"

    - name: "Resource Availability"
      metric: "available_resources_percentage"
      threshold: 0.6
      action: "Delay execution or reduce batch size"

    - name: "Historical Success Rate"
      metric: "similar_batch_success_rate"
      threshold: 0.75
      action: "Apply learned optimizations or adjust strategy"

  during_execution:
    - name: "Real-time Quality Threshold"
      metric: "average_quality_score"
      threshold: 0.7
      action: "Trigger quality improvement or flag for review"
      frequency: "continuous"

    - name: "Error Rate Threshold"
      metric: "error_rate_percentage"
      threshold: 0.15
      action: "Pause and analyze error patterns, adjust strategy"
      frequency: "continuous"

    - name: "Performance Degradation"
      metric: "performance_vs_baseline"
      threshold: 0.8
      action: "Optimize resource allocation or reduce parallelism"
      frequency: "continuous"

    - name: "Resource Utilization"
      metric: "resource_utilization_percentage"
      threshold: 0.85
      action: "Scale resources or reduce batch size"
      frequency: "continuous"

  post_execution:
    - name: "Overall Batch Quality"
      metric: "batch_quality_score"
      threshold: 0.75
      action: "Require review or reprocessing of low-quality items"

    - name: "Cost Efficiency"
      metric: "cost_per_quality_unit"
      threshold: "baseline * 1.2"
      action: "Analyze inefficiencies and optimize for future batches"

    - name: "Pattern Compliance"
      metric: "architectural_compliance_score"
      threshold: 0.8
      action: "Remediate non-compliant outputs"

# Pattern Learning Configuration
pattern_learning:
  enabled: true

  capture_patterns:
    - "Optimal batch sizes for different request types"
    - "Successful parallelization strategies"
    - "Error patterns and recovery approaches"
    - "Resource allocation patterns"
    - "Quality optimization techniques"
    - "Cost-effective execution strategies"

  learning_metrics:
    - metric: "batch_throughput"
      track: "requests_per_minute"
      optimize_for: "maximize"

    - metric: "quality_per_request"
      track: "average_quality_score"
      optimize_for: "maximize"

    - metric: "error_rate"
      track: "failed_requests_percentage"
      optimize_for: "minimize"

    - metric: "resource_efficiency"
      track: "quality_per_resource_unit"
      optimize_for: "maximize"

    - metric: "cost_effectiveness"
      track: "cost_per_quality_unit"
      optimize_for: "minimize"

  feedback_loops:
    - name: "Batch Size Optimization"
      input: "Historical batch performance data"
      output: "Recommended batch sizes for request types"
      update_frequency: "after_each_batch"

    - name: "Parallelization Strategy"
      input: "Resource utilization and throughput data"
      output: "Optimal parallelization levels"
      update_frequency: "after_each_batch"

    - name: "Error Prevention"
      input: "Error patterns and failure modes"
      output: "Pre-execution validation rules"
      update_frequency: "weekly"

    - name: "Quality Improvement"
      input: "Quality scores and pattern compliance"
      output: "Quality enhancement strategies"
      update_frequency: "after_each_batch"

# Batch Processing Workflow
workflow:
  phases:
    - name: "Pre-Execution Analysis"
      intelligence_gates:
        - "Complexity analysis"
        - "Baseline establishment"
        - "Optimization identification"
        - "Batch planning"
      success_criteria:
        - "All quality gates passed"
        - "Optimal batch size determined"
        - "Resources allocated"

    - name: "Batch Execution"
      intelligence_gates:
        - "Real-time quality monitoring"
        - "Performance tracking"
        - "Error detection"
        - "Adaptive optimization"
      success_criteria:
        - "Quality thresholds maintained"
        - "Error rate below threshold"
        - "Performance within targets"

    - name: "Post-Execution Analysis"
      intelligence_gates:
        - "Quality assessment"
        - "Performance analysis"
        - "Pattern learning"
        - "Compliance verification"
      success_criteria:
        - "Overall quality acceptable"
        - "Patterns captured"
        - "Recommendations generated"

# Performance Targets
performance_targets:
  throughput: "50+ requests per minute"
  quality_score: "0.80+ average across batch"
  error_rate: "<10% of requests"
  resource_efficiency: "0.75+ quality per resource unit"
  cost_effectiveness: "Within 120% of baseline cost per quality unit"
  pattern_compliance: "0.85+ architectural compliance"

# Monitoring & Reporting
monitoring:
  real_time_metrics:
    - "Requests processed"
    - "Current quality score"
    - "Error rate"
    - "Resource utilization"
    - "Processing speed"

  batch_reports:
    - "Quality distribution histogram"
    - "Performance vs baseline analysis"
    - "Cost-benefit summary"
    - "Pattern compliance report"
    - "Optimization recommendations"

  learning_reports:
    - "Learned patterns summary"
    - "Optimal configurations identified"
    - "Error prevention improvements"
    - "Quality enhancement strategies"
