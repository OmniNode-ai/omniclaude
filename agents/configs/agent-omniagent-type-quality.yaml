agent_domain: omnitype_quality
agent_purpose: Uses OmniAgent's type quality analysis to replace loosely typed variables
  like dict[str, Any] with properly typed Pydantic models. Specializes in Python type
  safety and code quality improvements.
agent_title: "\U0001F527 Enhanced Framework Integration"
agent_description: Uses OmniAgent's type quality analysis to replace loosely typed
  variables like dict[str, Any] with properly typed Pydantic models. Specializes in
  Python type safety and code quality improvements.
agent_context: general
domain_query: omnitype_quality patterns best practices
implementation_query: omnitype_quality implementation strategies
match_count: 5
confidence_threshold: 0.6
knowledge_capture_level: comprehensive
capabilities:
  mandatory_functions: true
  template_system: true
  enhanced_patterns: true
  quality_intelligence: true
  type_coverage_assessment: true
  type_safety_validation: true
  pydantic_model_generation: true
  anti_pattern_detection: true
  type_quality_scoring: true
  migration_impact_analysis: true
archon_mcp_enabled: true
correlation_tracking: true
parallel_capable: true

intelligence_triggers:
  - "analyze type coverage"
  - "assess type safety"
  - "improve type quality"
  - "convert to pydantic"
  - "detect type anti-patterns"
  - "validate type definitions"
  - "score type quality"
  - "analyze type migration impact"

intelligence_integration:
  pre_execution_intelligence:
    - tool: "assess_code_quality"
      purpose: "Analyze current type coverage and quality baseline"
      parameters:
        focus_areas:
          - "type_coverage"
          - "type_safety"
          - "any_type_usage"
          - "dict_str_any_patterns"
      success_criteria:
        - "Type coverage metrics collected"
        - "Anti-pattern instances identified"
        - "Quality baseline established"

    - tool: "get_quality_patterns"
      purpose: "Identify existing type patterns and anti-patterns"
      parameters:
        pattern_type: "type_usage_patterns"
        focus_areas:
          - "pydantic_models"
          - "type_hints"
          - "generic_types"
      success_criteria:
        - "Type patterns catalogued"
        - "Anti-patterns identified"
        - "Migration opportunities discovered"

    - tool: "check_architectural_compliance"
      purpose: "Verify type system architectural compliance"
      parameters:
        architecture_type: "onex"
        compliance_checks:
          - "contract_typing"
          - "model_definitions"
          - "type_consistency"
      success_criteria:
        - "ONEX compliance verified"
        - "Contract typing assessed"
        - "Architecture alignment confirmed"

  during_execution_intelligence:
    quality_gates:
      - name: "Type Coverage Gate"
        tool: "assess_code_quality"
        threshold: 0.85
        metrics:
          - "type_annotation_coverage"
          - "explicit_type_ratio"
          - "any_type_reduction"
        remediation:
          - "Add missing type hints"
          - "Convert Any to specific types"
          - "Generate Pydantic models"

      - name: "Type Safety Gate"
        tool: "assess_code_quality"
        threshold: 0.90
        metrics:
          - "type_consistency"
          - "type_error_count"
          - "unsafe_cast_count"
        remediation:
          - "Fix type inconsistencies"
          - "Add type guards"
          - "Implement safe type conversions"

      - name: "Pydantic Model Gate"
        tool: "get_quality_patterns"
        threshold: 0.80
        metrics:
          - "model_completeness"
          - "validation_coverage"
          - "field_type_safety"
        remediation:
          - "Add missing field validators"
          - "Improve field type definitions"
          - "Add field constraints"

      - name: "Anti-Pattern Gate"
        tool: "get_quality_patterns"
        threshold: 0.75
        metrics:
          - "dict_str_any_usage"
          - "implicit_any_count"
          - "type_ignore_count"
        remediation:
          - "Replace dict[str, Any] with models"
          - "Make implicit types explicit"
          - "Remove type: ignore comments"

    continuous_monitoring:
      - metric: "type_coverage_percentage"
        tool: "assess_code_quality"
        frequency: "per_file"
        alert_threshold: 0.80
        target_threshold: 0.95

      - metric: "any_type_usage_count"
        tool: "get_quality_patterns"
        frequency: "per_change"
        alert_threshold: 5
        target_threshold: 0

      - metric: "type_safety_score"
        tool: "assess_code_quality"
        frequency: "per_file"
        alert_threshold: 0.85
        target_threshold: 0.95

  post_execution_intelligence:
    - tool: "assess_code_quality"
      purpose: "Validate type quality improvements"
      parameters:
        validation_mode: "comprehensive"
        comparison: "before_after"
      success_criteria:
        - "Type coverage increased by >10%"
        - "Any type usage reduced by >50%"
        - "Type safety score >0.90"
        - "Zero critical type issues"

    - tool: "get_quality_patterns"
      purpose: "Capture successful type migration patterns"
      parameters:
        pattern_type: "successful_migrations"
        capture_mode: "detailed"
      success_criteria:
        - "Migration patterns documented"
        - "Pydantic models catalogued"
        - "Reusable patterns identified"

    - tool: "check_architectural_compliance"
      purpose: "Verify ONEX type system compliance"
      parameters:
        architecture_type: "onex"
        validation_level: "strict"
      success_criteria:
        - "ONEX compliance maintained"
        - "Contract typing correct"
        - "Model patterns aligned"

    - tool: "track_pattern_creation"
      purpose: "Document type quality improvements for learning"
      parameters:
        pattern_category: "type_quality_improvement"
        metrics:
          - "type_coverage_improvement"
          - "any_usage_reduction"
          - "pydantic_models_created"
          - "type_safety_increase"
      success_criteria:
        - "Pattern tracked successfully"
        - "Metrics captured"
        - "Learning data persisted"

  intelligence_workflow:
    1. "Pre-Execution: Analyze current type coverage and establish baseline"
    2. "Pre-Execution: Identify type patterns and anti-patterns"
    3. "Pre-Execution: Verify architectural compliance"
    4. "During-Execution: Apply Type Coverage Gate (>85% coverage)"
    5. "During-Execution: Apply Type Safety Gate (>90% safety)"
    6. "During-Execution: Apply Pydantic Model Gate (>80% completeness)"
    7. "During-Execution: Apply Anti-Pattern Gate (<25% anti-patterns)"
    8. "During-Execution: Monitor type coverage continuously"
    9. "During-Execution: Monitor Any usage continuously"
    10. "During-Execution: Monitor type safety continuously"
    11. "Post-Execution: Validate type quality improvements"
    12. "Post-Execution: Capture successful migration patterns"
    13. "Post-Execution: Verify ONEX compliance"
    14. "Post-Execution: Track pattern for learning"

  pattern_learning:
    capture_events:
      - "type_migration_successful"
      - "pydantic_model_created"
      - "any_type_eliminated"
      - "type_safety_improved"
      - "anti_pattern_resolved"

    learning_categories:
      - category: "type_migration_patterns"
        examples:
          - "dict[str, Any] → Pydantic BaseModel"
          - "Optional[Any] → Optional[SpecificType]"
          - "List[Any] → List[TypedModel]"

      - category: "pydantic_best_practices"
        examples:
          - "Field validators for complex types"
          - "Config classes for model behavior"
          - "Nested model relationships"

      - category: "type_safety_patterns"
        examples:
          - "Type guards for runtime validation"
          - "Generic type constraints"
          - "Protocol-based typing"

    improvement_tracking:
      - "Track type coverage improvements over time"
      - "Monitor Any usage reduction trends"
      - "Capture successful Pydantic model patterns"
      - "Document common migration challenges and solutions"
