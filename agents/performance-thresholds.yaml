# Performance Thresholds Specification - ONEX Agent Framework
# Phase 1 Deliverable: 33 performance thresholds across 7 categories
# Target: <100ms monitoring overhead per agent execution

schema_version: "1.0.0"
total_thresholds: 33
total_categories: 7
monitoring_overhead_ms: 100

# Performance Categories
categories:
  intelligence:
    description: "Intelligence gathering and RAG query performance"
    thresholds: 6
    monitoring_frequency: "per_query"
    criticality: "high"

  parallel_execution:
    description: "Parallel agent coordination and execution performance"
    thresholds: 5
    monitoring_frequency: "per_coordination"
    criticality: "high"

  coordination:
    description: "Multi-agent coordination and synchronization performance"
    thresholds: 4
    monitoring_frequency: "per_sync_point"
    criticality: "medium"

  context_management:
    description: "Context inheritance and lifecycle management performance"
    thresholds: 6
    monitoring_frequency: "per_operation"
    criticality: "high"

  template_system:
    description: "Template instantiation and configuration performance"
    thresholds: 4
    monitoring_frequency: "per_instantiation"
    criticality: "low"

  lifecycle:
    description: "Agent lifecycle and framework integration performance"
    thresholds: 4
    monitoring_frequency: "per_lifecycle_phase"
    criticality: "medium"

  dashboard:
    description: "Performance monitoring and dashboard update performance"
    thresholds: 4
    monitoring_frequency: "continuous"
    criticality: "low"

# Performance Thresholds Specification
performance_thresholds:
  # Intelligence Thresholds (INT-001 to INT-006)
  INT-001:
    name: "RAG Query Response Time"
    description: "Maximum time for RAG intelligence queries"
    category: "intelligence"
    threshold_ms: 1500
    tolerance_ms: 200
    measurement_type: "response_time"
    criticality: "high"
    alert_threshold_ms: 1200

  INT-002:
    name: "Intelligence Gathering Overhead"
    description: "Pre-execution intelligence gathering time"
    category: "intelligence"
    threshold_ms: 100
    tolerance_ms: 25
    measurement_type: "overhead"
    criticality: "high"
    alert_threshold_ms: 80

  INT-003:
    name: "Pattern Recognition Performance"
    description: "Pattern extraction and synthesis time"
    category: "intelligence"
    threshold_ms: 500
    tolerance_ms: 100
    measurement_type: "processing_time"
    criticality: "medium"
    alert_threshold_ms: 400

  INT-004:
    name: "Knowledge Capture Latency"
    description: "UAKS knowledge capture and storage time"
    category: "intelligence"
    threshold_ms: 300
    tolerance_ms: 50
    measurement_type: "storage_latency"
    criticality: "medium"
    alert_threshold_ms: 250

  INT-005:
    name: "Cross-Domain Synthesis"
    description: "Multi-source intelligence synthesis time"
    category: "intelligence"
    threshold_ms: 800
    tolerance_ms: 150
    measurement_type: "processing_time"
    criticality: "medium"
    alert_threshold_ms: 650

  INT-006:
    name: "Intelligence Application Time"
    description: "Time to apply gathered intelligence to execution"
    category: "intelligence"
    threshold_ms: 200
    tolerance_ms: 50
    measurement_type: "application_time"
    criticality: "high"
    alert_threshold_ms: 150

  # Parallel Execution Thresholds (PAR-001 to PAR-005)
  PAR-001:
    name: "Parallel Coordination Setup"
    description: "Time to establish parallel coordination state"
    category: "parallel_execution"
    threshold_ms: 500
    tolerance_ms: 100
    measurement_type: "setup_time"
    criticality: "high"
    alert_threshold_ms: 400

  PAR-002:
    name: "Context Distribution Time"
    description: "Time to distribute context to parallel agents"
    category: "parallel_execution"
    threshold_ms: 200
    tolerance_ms: 50
    measurement_type: "distribution_time"
    criticality: "high"
    alert_threshold_ms: 150

  PAR-003:
    name: "Synchronization Point Latency"
    description: "Time for parallel agents to reach sync points"
    category: "parallel_execution"
    threshold_ms: 1000
    tolerance_ms: 200
    measurement_type: "sync_latency"
    criticality: "medium"
    alert_threshold_ms: 800

  PAR-004:
    name: "Result Aggregation Performance"
    description: "Time to collect and merge parallel results"
    category: "parallel_execution"
    threshold_ms: 300
    tolerance_ms: 75
    measurement_type: "aggregation_time"
    criticality: "high"
    alert_threshold_ms: 225

  PAR-005:
    name: "Parallel Efficiency Ratio"
    description: "Parallel execution speedup vs sequential baseline"
    category: "parallel_execution"
    threshold_ratio: 0.6
    tolerance_ratio: 0.1
    measurement_type: "efficiency_ratio"
    criticality: "medium"
    alert_threshold_ratio: 0.7

  # Coordination Thresholds (COORD-001 to COORD-004)
  COORD-001:
    name: "Agent Delegation Handoff"
    description: "Time to delegate task to specialized agent"
    category: "coordination"
    threshold_ms: 150
    tolerance_ms: 30
    measurement_type: "handoff_time"
    criticality: "medium"
    alert_threshold_ms: 120

  COORD-002:
    name: "Context Inheritance Latency"
    description: "Time to preserve and transfer context"
    category: "coordination"
    threshold_ms: 50
    tolerance_ms: 15
    measurement_type: "inheritance_time"
    criticality: "high"
    alert_threshold_ms: 35

  COORD-003:
    name: "Multi-Agent Communication"
    description: "Inter-agent communication response time"
    category: "coordination"
    threshold_ms: 100
    tolerance_ms: 25
    measurement_type: "communication_time"
    criticality: "medium"
    alert_threshold_ms: 75

  COORD-004:
    name: "Coordination Overhead"
    description: "Total coordination overhead per multi-agent task"
    category: "coordination"
    threshold_ms: 300
    tolerance_ms: 75
    measurement_type: "total_overhead"
    criticality: "low"
    alert_threshold_ms: 225

  # Context Management Thresholds (CTX-001 to CTX-006)
  CTX-001:
    name: "Context Initialization Time"
    description: "Time to establish agent execution context"
    category: "context_management"
    threshold_ms: 50
    tolerance_ms: 15
    measurement_type: "initialization_time"
    criticality: "high"
    alert_threshold_ms: 35

  CTX-002:
    name: "Context Preservation Latency"
    description: "Time to preserve context during operations"
    category: "context_management"
    threshold_ms: 25
    tolerance_ms: 10
    measurement_type: "preservation_time"
    criticality: "high"
    alert_threshold_ms: 15

  CTX-003:
    name: "Context Refresh Performance"
    description: "Selective context refresh operation time"
    category: "context_management"
    threshold_ms: 75
    tolerance_ms: 20
    measurement_type: "refresh_time"
    criticality: "medium"
    alert_threshold_ms: 55

  CTX-004:
    name: "Context Memory Footprint"
    description: "Memory usage for context storage per agent"
    category: "context_management"
    threshold_mb: 10
    tolerance_mb: 2
    measurement_type: "memory_usage"
    criticality: "medium"
    alert_threshold_mb: 8

  CTX-005:
    name: "Context Lifecycle Management"
    description: "Complete context lifecycle operation time"
    category: "context_management"
    threshold_ms: 200
    tolerance_ms: 50
    measurement_type: "lifecycle_time"
    criticality: "medium"
    alert_threshold_ms: 150

  CTX-006:
    name: "Context Cleanup Performance"
    description: "Time to properly cleanup context resources"
    category: "context_management"
    threshold_ms: 100
    tolerance_ms: 25
    measurement_type: "cleanup_time"
    criticality: "low"
    alert_threshold_ms: 75

  # Template System Thresholds (TPL-001 to TPL-004)
  TPL-001:
    name: "Template Instantiation Time"
    description: "Time to instantiate agent templates"
    category: "template_system"
    threshold_ms: 100
    tolerance_ms: 25
    measurement_type: "instantiation_time"
    criticality: "low"
    alert_threshold_ms: 75

  TPL-002:
    name: "Template Parameter Resolution"
    description: "Time to resolve template parameters and caching"
    category: "template_system"
    threshold_ms: 50
    tolerance_ms: 15
    measurement_type: "resolution_time"
    criticality: "low"
    alert_threshold_ms: 35

  TPL-003:
    name: "Configuration Overlay Performance"
    description: "Time to apply configuration overlays"
    category: "template_system"
    threshold_ms: 30
    tolerance_ms: 10
    measurement_type: "overlay_time"
    criticality: "low"
    alert_threshold_ms: 20

  TPL-004:
    name: "Template Cache Hit Ratio"
    description: "Template caching effectiveness ratio"
    category: "template_system"
    threshold_ratio: 0.85
    tolerance_ratio: 0.05
    measurement_type: "cache_hit_ratio"
    criticality: "low"
    alert_threshold_ratio: 0.9

  # Lifecycle Thresholds (LCL-001 to LCL-004)
  LCL-001:
    name: "Agent Initialization Performance"
    description: "Complete agent initialization time"
    category: "lifecycle"
    threshold_ms: 300
    tolerance_ms: 75
    measurement_type: "initialization_time"
    criticality: "medium"
    alert_threshold_ms: 225

  LCL-002:
    name: "Framework Integration Time"
    description: "Time to integrate with framework components"
    category: "lifecycle"
    threshold_ms: 100
    tolerance_ms: 25
    measurement_type: "integration_time"
    criticality: "medium"
    alert_threshold_ms: 75

  LCL-003:
    name: "Quality Gate Execution"
    description: "Total time for quality gate validation"
    category: "lifecycle"
    threshold_ms: 200
    tolerance_ms: 50
    measurement_type: "validation_time"
    criticality: "high"
    alert_threshold_ms: 150

  LCL-004:
    name: "Agent Cleanup Performance"
    description: "Time for proper agent resource cleanup"
    category: "lifecycle"
    threshold_ms: 150
    tolerance_ms: 40
    measurement_type: "cleanup_time"
    criticality: "low"
    alert_threshold_ms: 110

  # Dashboard Thresholds (DASH-001 to DASH-004)
  DASH-001:
    name: "Performance Data Collection"
    description: "Time to collect performance metrics"
    category: "dashboard"
    threshold_ms: 50
    tolerance_ms: 15
    measurement_type: "collection_time"
    criticality: "low"
    alert_threshold_ms: 35

  DASH-002:
    name: "Dashboard Update Latency"
    description: "Time to update performance dashboard"
    category: "dashboard"
    threshold_ms: 100
    tolerance_ms: 25
    measurement_type: "update_time"
    criticality: "low"
    alert_threshold_ms: 75

  DASH-003:
    name: "Trend Analysis Performance"
    description: "Time to analyze performance trends"
    category: "dashboard"
    threshold_ms: 500
    tolerance_ms: 100
    measurement_type: "analysis_time"
    criticality: "low"
    alert_threshold_ms: 400

  DASH-004:
    name: "Optimization Recommendation Time"
    description: "Time to generate optimization recommendations"
    category: "dashboard"
    threshold_ms: 300
    tolerance_ms: 75
    measurement_type: "recommendation_time"
    criticality: "low"
    alert_threshold_ms: 225

# Monitoring Configuration
monitoring_config:
  collection_interval_ms: 1000
  alert_escalation_levels:
    warning: 80  # % of threshold
    critical: 95  # % of threshold
    emergency: 105  # % of threshold

  performance_baseline:
    measurement_window_minutes: 10
    minimum_samples: 100
    confidence_interval: 0.95

  optimization_triggers:
    consecutive_threshold_breaches: 3
    performance_degradation_threshold: 0.15  # 15% degradation
    automatic_optimization: true

# Compliance Requirements
compliance:
  threshold_compliance_rate: 95.0  # 95% must meet thresholds
  monitoring_coverage: 100.0  # All operations monitored
  alert_response_time_minutes: 5  # Max response time for critical alerts

# Integration Points
integration:
  quality_gates: "@quality-gates-spec.yaml"
  agent_patterns: "@COMMON_AGENT_PATTERNS.md"
  lifecycle_management: "@COMMON_CONTEXT_LIFECYCLE.md"
  template_system: "@COMMON_TEMPLATES.md"
